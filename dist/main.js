!function(){var t=400,e=400,i=31,n=null,o=null,a=[],h=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};function r(){setTimeout((function(){requestAnimationFrame(r),l()}),1e3/30)}var p=function(t){for(var e=0;e<a.length;e++){var n=!1,o=!1;if(t.layerX>=a[e].left&&t.layerX<=a[e].left+i&&(n=!0),t.layerY>=a[e].top&&t.layerY<=a[e].top+i&&(o=!0),n&&o){a[e].explode();break}}},s=function(){function t(t){this._frame=0,this._move=!1,this._upDown=0,this._explode=!1,this._explodeCallback=null,this._explosionPhase=0,this._that={};var e=this;e._that={remove:!1,top:t.top,left:t.left,anger:t.anger||0,movement:null==t.movement||t.movement,spriteDirection:t.spriteDirection||0,spriteMove:null==t.spriteMove||t.spriteMove,spriteIndex:t.spriteIndex||0,explode:function(t){0===e._explosionPhase&&(e._that.spriteDirection=4,e._that.movement=!1,e._that.spriteMove=!0,e._that.anger=25,e._that.spriteIndex=0,e._explosionPhase++,e._explode=!0,e._explodeCallback=t)},render:function(){if(e._frame++,e._frame+e._that.anger>30&&e._that.spriteMove&&(e._frame=0,e._that.spriteIndex++,!0===e._explode&&(e._explosionPhase++,e._explosionPhase>=t.sprites[4].length&&(e._that.remove=!0)),e._that.movement)){h(10*e._that.anger/2,600)>500&&(e._that.spriteDirection=1===e._that.spriteDirection?0:1);var o=h(10*e._that.anger,600),a=h(10*e._that.anger/2,600),r=h(0,500);o>300&&(r>250?(0===e._that.spriteDirection?e._that.left=e._that.left+5:e._that.left=e._that.left-5,e._that.left<0&&(e._that.left=0),e._that.left+i>n.width&&(e._that.left=n.width-i)):(a>500&&(e._upDown=0===e._upDown?1:0),0===e._upDown?e._that.top=e._that.top+5:e._that.top=e._that.top-5,e._that.top<0&&(e._that.top=0),e._that.top+i>=n.height&&(e._that.top=n.height-i)))}e._that.spriteIndex>=t.sprites[e._that.spriteDirection].length&&(e._that.spriteIndex=0),t.context.drawImage(t.image,t.sprites[e._that.spriteDirection][e._that.spriteIndex][0],t.sprites[e._that.spriteDirection][e._that.spriteIndex][1],t.width,t.height,e._that.left,e._that.top,t.width,t.height)}}}return t.prototype.getSprite=function(){return this._that},t}(),_=function(){var t=document.getElementById("chicken");a.push(new s({context:o,image:t,width:i,top:h(30,.75*n.height),left:h(30,.75*n.width),anger:h(20,30),height:i,sprites:[[[66,22],[98,22],[130,24],[162,24]],[[64,90],[96,89],[128,88],[160,88]],[],[],[[240,22],[205,22],[23,87],[23,56],[23,20]]]}).getSprite())},l=function(){o.clearRect(0,0,n.width,n.height);for(var t=a.length-1;t>=0;t--)!1===a[t].remove?a[t].render():(a.splice(t,1),_())};window.addEventListener("load",(function(){console.log("init"),t=document.body.offsetWidth,e=document.body.offsetHeight,console.log(e),(n=document.createElement("canvas")).height=e,n.width=t,n.addEventListener("mousedown",p,!1),document.body.appendChild(n),o=n.getContext("2d"),r(),_(),_(),_(),_(),_(),_(),_(),_(),_()}),!1)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leHBsb2RpbmctY2hpY2tlbi8uL3NyYy90cy9tYWluLnRzIl0sIm5hbWVzIjpbIndpZHRoIiwiaGVpZ2h0Iiwic3ByaXRlU2l6ZSIsImNhbnZhcyIsImNvbnRleHQiLCJjaGlja2VucyIsImdldFJhbmRvbSIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxvb3AiLCJzZXRUaW1lb3V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVkcmF3IiwiaHVudCIsInBFdmVudCIsIl9pIiwibGVuZ3RoIiwiX2hvcml6b250YWwiLCJfdmVydGljYWwiLCJsYXllclgiLCJsZWZ0IiwibGF5ZXJZIiwidG9wIiwiZXhwbG9kZSIsInNwcml0ZSIsIm9wdGlvbnMiLCJ0aGlzIiwiX2ZyYW1lIiwiX21vdmUiLCJfdXBEb3duIiwiX2V4cGxvZGUiLCJfZXhwbG9kZUNhbGxiYWNrIiwiX2V4cGxvc2lvblBoYXNlIiwiX3RoYXQiLCJfbWUiLCJyZW1vdmUiLCJhbmdlciIsIm1vdmVtZW50Iiwic3ByaXRlRGlyZWN0aW9uIiwic3ByaXRlTW92ZSIsInNwcml0ZUluZGV4IiwiY2FsbGJhY2siLCJyZW5kZXIiLCJzcHJpdGVzIiwiX3Nob3VkSVN0YXlPclNob3VsZElHbyIsIl91cERvd25DaGFuZ2UiLCJfaG9yaXpvbnRhbFZlcnRpY2FsIiwiZHJhd0ltYWdlIiwiaW1hZ2UiLCJwcm90b3R5cGUiLCJnZXRTcHJpdGUiLCJzcGF3biIsIl9pbWdDaGlja2VuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInB1c2giLCJjbGVhclJlY3QiLCJzcGxpY2UiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiXSwibWFwcGluZ3MiOiJDQUNBLFdBRUksSUFDSUEsRUFBUSxJ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QUFPakMsRUFBVSxHQUFJLElBUXJCTCxPQUFRQyxFQUNSNEMsUUFBUyxDQUNMLENBQ0ksQ0FBQyxHQUFJLElBQ0wsQ0FBQyxHQUFJLElBQ0wsQ0FBQyxJQUFLLElBQ04sQ0FBQyxJQUFLLEtBRVYsQ0FDSSxDQUFDLEdBQUksSUFDTCxDQUFDLEdBQUksSUFDTCxDQUFDLElBQUssSUFDTixDQUFDLElBQUssS0FFVixHQUNBLEdBQ0EsQ0FDSSxDQUFDLElBQUssSUFDTixDQUFDLElBQUssSUFDTixDQUFDLEdBQUksSUFDTCxDQUFDLEdBQUksSUFDTCxDQUFDLEdBQUksUUFHZE8sY0FFSHRDLEVBQVMsV0FDVFgsRUFBUXVELFVBQVUsRUFBRyxFQUFHeEQsRUFBT0gsTUFBT0csRUFBT0YsUUFDN0MsSUFBSyxJQUFJaUIsRUFBS2IsRUFBU2MsT0FBUyxFQUFHRCxHQUFNLEVBQUdBLEtBQ1osSUFBeEJiLEVBQVNhLEdBQUlvQixPQUNiakMsRUFBU2EsR0FBSTJCLFVBR2J4QyxFQUFTdUQsT0FBTzFDLEVBQUksR0FDcEJvQyxNQUlaTyxPQUFPQyxpQkFBaUIsUUF6TmIsV0FDUEMsUUFBUUMsSUFBSSxRQUNaaEUsRUFBUXdELFNBQVNTLEtBQUtDLFlBQ3RCakUsRUFBU3VELFNBQVNTLEtBQUtFLGFBQ3ZCSixRQUFRQyxJQUFJL0QsSUFDWkUsRUFBU3FELFNBQVNZLGNBQWMsV0FDekJuRSxPQUFTQSxFQUNoQkUsRUFBT0gsTUFBUUEsRUFDZkcsRUFBTzJELGlCQUFpQixZQUFhOUMsR0FBTSxHQUMzQ3dDLFNBQVNTLEtBQUtJLFlBQVlsRSxHQUMxQkMsRUFBVUQsRUFBT21FLFdBQVcsTUFFNUIxRCxJQUNBMEMsSUFDQUEsSUFDQUEsSUFDQUEsSUFDQUEsSUFDQUEsSUFDQUEsSUFDQUEsSUFDQUEsT0FvTWtDLEdBeE8xQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQVRURU5USU9OOiB0aGlzIGlzIHZlcnkgb2xkIGpzIGNvZGUgc2ltcGx5IHJld3JpdHRlbiB0byB0eXBlc2NyaXB0XHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBjb25maWdcclxuICAgIHZhciBmcHMgPSAzMDtcclxuICAgIHZhciB3aWR0aCA9IDQwMDtcclxuICAgIHZhciBoZWlnaHQgPSA0MDA7XHJcbiAgICB2YXIgc3ByaXRlU2l6ZSA9IDMxO1xyXG4gICAgLy8gaW50ZXJuXHJcbiAgICB2YXIgY2FudmFzID0gbnVsbDtcclxuICAgIHZhciBjb250ZXh0ID0gbnVsbDtcclxuICAgIHZhciBzdGFydCA9IG51bGw7XHJcbiAgICB2YXIgY2hpY2tlbnMgPSBbXTtcclxuICAgIC8vIHV0aWxzXHJcbiAgICB2YXIgZ2V0UmFuZG9tID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbik7XHJcbiAgICB9O1xyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2luaXQnKTtcclxuICAgICAgICB3aWR0aCA9IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coaGVpZ2h0KTtcclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBodW50LCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG4gICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIC8vIHZhciBkYXRlVGV4dDphbnkgPSBuZXcgdGV4dCgpOyAvLyBUT0RPXHJcbiAgICAgICAgbG9vcCgpO1xyXG4gICAgICAgIHNwYXduKCk7XHJcbiAgICAgICAgc3Bhd24oKTtcclxuICAgICAgICBzcGF3bigpO1xyXG4gICAgICAgIHNwYXduKCk7XHJcbiAgICAgICAgc3Bhd24oKTtcclxuICAgICAgICBzcGF3bigpO1xyXG4gICAgICAgIHNwYXduKCk7XHJcbiAgICAgICAgc3Bhd24oKTtcclxuICAgICAgICBzcGF3bigpO1xyXG4gICAgfTtcclxuICAgIC8vIFNjaGxlaWZlXHJcbiAgICBmdW5jdGlvbiBsb29wKCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XHJcbiAgICAgICAgICAgIHJlZHJhdygpO1xyXG4gICAgICAgIH0sIDEwMDAgLyBmcHMpO1xyXG4gICAgfVxyXG4gICAgdmFyIHRleHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGF0ID0ge1xyXG4gICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICh0ZXh0LCBwb3NYLCBwb3NZKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyMzMzMnO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VXaWR0aCA9ICcyMHB4JztcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZm9udCA9ICczMHB0IFRhaG9tYSc7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9ICdsZWZ0JztcclxuICAgICAgICAgICAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxUZXh0KHRleHQsIHBvc1gsIHBvc1kpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KHRleHQsIHBvc1gsIHBvc1kpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX3RoYXQ7XHJcbiAgICB9O1xyXG4gICAgdmFyIGh1bnQgPSBmdW5jdGlvbiAocEV2ZW50KSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGNoaWNrZW5zLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2hvcml6b250YWwgPSBmYWxzZSwgX3ZlcnRpY2FsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChwRXZlbnQubGF5ZXJYID49IGNoaWNrZW5zW19pXS5sZWZ0ICYmIHBFdmVudC5sYXllclggPD0gY2hpY2tlbnNbX2ldLmxlZnQgKyBzcHJpdGVTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBfaG9yaXpvbnRhbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBFdmVudC5sYXllclkgPj0gY2hpY2tlbnNbX2ldLnRvcCAmJiBwRXZlbnQubGF5ZXJZIDw9IGNoaWNrZW5zW19pXS50b3AgKyBzcHJpdGVTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBfdmVydGljYWwgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfaG9yaXpvbnRhbCAmJiBfdmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgIGNoaWNrZW5zW19pXS5leHBsb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgc3ByaXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIHNwcml0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fbW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl91cERvd24gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBsb2RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGxvZGVDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGxvc2lvblBoYXNlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fdGhhdCA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgX21lID0gdGhpcztcclxuICAgICAgICAgICAgX21lLl90aGF0ID0ge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRvcDogb3B0aW9ucy50b3AsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBvcHRpb25zLmxlZnQsXHJcbiAgICAgICAgICAgICAgICBhbmdlcjogb3B0aW9ucy5hbmdlciB8fCAwLFxyXG4gICAgICAgICAgICAgICAgbW92ZW1lbnQ6IChvcHRpb25zLm1vdmVtZW50ICE9IG51bGwpID8gb3B0aW9ucy5tb3ZlbWVudCA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzcHJpdGVEaXJlY3Rpb246IG9wdGlvbnMuc3ByaXRlRGlyZWN0aW9uIHx8IDAsXHJcbiAgICAgICAgICAgICAgICBzcHJpdGVNb3ZlOiAob3B0aW9ucy5zcHJpdGVNb3ZlICE9IG51bGwpID8gb3B0aW9ucy5zcHJpdGVNb3ZlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNwcml0ZUluZGV4OiBvcHRpb25zLnNwcml0ZUluZGV4IHx8IDAsXHJcbiAgICAgICAgICAgICAgICBleHBsb2RlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX21lLl9leHBsb3Npb25QaGFzZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQuc3ByaXRlRGlyZWN0aW9uID0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX21lLl90aGF0Lm1vdmVtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tZS5fdGhhdC5zcHJpdGVNb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX21lLl90aGF0LmFuZ2VyID0gMjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tZS5fdGhhdC5zcHJpdGVJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tZS5fZXhwbG9zaW9uUGhhc2UrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX21lLl9leHBsb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX21lLl9leHBsb2RlQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX21lLl9mcmFtZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNwcml0ZS1iaWxkIGVycmVjaG5lblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfbWUuX2ZyYW1lICsgX21lLl90aGF0LmFuZ2VyID4gZnBzICYmIF9tZS5fdGhhdC5zcHJpdGVNb3ZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tZS5fZnJhbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQuc3ByaXRlSW5kZXgrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwbG9kaWVyZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tZS5fZXhwbG9kZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lLl9leHBsb3Npb25QaGFzZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tZS5fZXhwbG9zaW9uUGhhc2UgPj0gb3B0aW9ucy5zcHJpdGVzWzRdLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZS5fdGhhdC5yZW1vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfbWUuX3RoYXQubW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJld2VndW5nc3JpY2h0dW5nIGZlc3RsZWdlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9kaXJlY3Rpb25DaGFuZ2UgPSBnZXRSYW5kb20oKDEwICogX21lLl90aGF0LmFuZ2VyKSAvIDIsIDYwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcmVjdGlvbkNoYW5nZSA+IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZS5fdGhhdC5zcHJpdGVEaXJlY3Rpb24gPSAoX21lLl90aGF0LnNwcml0ZURpcmVjdGlvbiA9PT0gMSkgPyAwIDogMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJld2VnZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfc2hvdWRJU3RheU9yU2hvdWxkSUdvID0gZ2V0UmFuZG9tKDEwICogX21lLl90aGF0LmFuZ2VyLCA2MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF91cERvd25DaGFuZ2UgPSBnZXRSYW5kb20oKDEwICogX21lLl90aGF0LmFuZ2VyKSAvIDIsIDYwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2hvcml6b250YWxWZXJ0aWNhbCA9IGdldFJhbmRvbSgwLCA1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9zaG91ZElTdGF5T3JTaG91bGRJR28gPiAzMDApIHsgLy8gYmV3ZWdlbj9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2hvcml6b250YWxWZXJ0aWNhbCA+IDI1MCkgeyAvLyBob3Jpem9udGFsP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX21lLl90aGF0LnNwcml0ZURpcmVjdGlvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lLl90aGF0LmxlZnQgPSBfbWUuX3RoYXQubGVmdCArIDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQubGVmdCA9IF9tZS5fdGhhdC5sZWZ0IC0gNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX21lLl90aGF0LmxlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQubGVmdCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tZS5fdGhhdC5sZWZ0ICsgc3ByaXRlU2l6ZSA+IGNhbnZhcy53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lLl90aGF0LmxlZnQgPSBjYW52YXMud2lkdGggLSBzcHJpdGVTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyB2ZXJ0aWthbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3VwRG93bkNoYW5nZSA+IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lLl91cERvd24gPSAoX21lLl91cERvd24gPT09IDApID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tZS5fdXBEb3duID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQudG9wID0gX21lLl90aGF0LnRvcCArIDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQudG9wID0gX21lLl90aGF0LnRvcCAtIDU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tZS5fdGhhdC50b3AgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQudG9wID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX21lLl90aGF0LnRvcCArIHNwcml0ZVNpemUgPj0gY2FudmFzLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lLl90aGF0LnRvcCA9IGNhbnZhcy5oZWlnaHQgLSBzcHJpdGVTaXplO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGluZGV4IGplIG5hY2ggbWVuZ2UgZGVyIHNwcml0ZXMgenVyw7xja3NldHplblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfbWUuX3RoYXQuc3ByaXRlSW5kZXggPj0gb3B0aW9ucy5zcHJpdGVzW19tZS5fdGhhdC5zcHJpdGVEaXJlY3Rpb25dLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbWUuX3RoYXQuc3ByaXRlSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IHRoZSBhbmltYXRpb25cclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbnRleHQuZHJhd0ltYWdlKG9wdGlvbnMuaW1hZ2UsIG9wdGlvbnMuc3ByaXRlc1tfbWUuX3RoYXQuc3ByaXRlRGlyZWN0aW9uXVtfbWUuX3RoYXQuc3ByaXRlSW5kZXhdWzBdLCBvcHRpb25zLnNwcml0ZXNbX21lLl90aGF0LnNwcml0ZURpcmVjdGlvbl1bX21lLl90aGF0LnNwcml0ZUluZGV4XVsxXSwgb3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQsIF9tZS5fdGhhdC5sZWZ0LCBfbWUuX3RoYXQudG9wLCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNwcml0ZS5wcm90b3R5cGUuZ2V0U3ByaXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGhhdDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBzcHJpdGU7XHJcbiAgICB9KCkpO1xyXG4gICAgdmFyIHNwYXduID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfaW1nQ2hpY2tlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGlja2VuJyk7XHJcbiAgICAgICAgY2hpY2tlbnMucHVzaChuZXcgc3ByaXRlKHtcclxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcclxuICAgICAgICAgICAgaW1hZ2U6IF9pbWdDaGlja2VuLFxyXG4gICAgICAgICAgICB3aWR0aDogc3ByaXRlU2l6ZSxcclxuICAgICAgICAgICAgdG9wOiBnZXRSYW5kb20oMzAsIGNhbnZhcy5oZWlnaHQgKiAwLjc1KSxcclxuICAgICAgICAgICAgbGVmdDogZ2V0UmFuZG9tKDMwLCBjYW52YXMud2lkdGggKiAwLjc1KSxcclxuICAgICAgICAgICAgYW5nZXI6IGdldFJhbmRvbSgyMCwgMzApLFxyXG4gICAgICAgICAgICAvLyB0b3A6IDAsXHJcbiAgICAgICAgICAgIC8vIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgIC8vIGFuZ2VyOiAwLFxyXG4gICAgICAgICAgICAvLyBtb3ZlbWVudDogZmFsc2UsXHJcbiAgICAgICAgICAgIC8vIHNwcml0ZU1vdmU6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIHNwcml0ZUluZGV4OiA0LFxyXG4gICAgICAgICAgICAvLyBzcHJpdGVEaXJlY3Rpb246IDQsXHJcbiAgICAgICAgICAgIGhlaWdodDogc3ByaXRlU2l6ZSxcclxuICAgICAgICAgICAgc3ByaXRlczogW1xyXG4gICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgIFs2NiwgMjJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFs5OCwgMjJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFsxMzAsIDI0XSxcclxuICAgICAgICAgICAgICAgICAgICBbMTYyLCAyNF1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgWzY0LCA5MF0sXHJcbiAgICAgICAgICAgICAgICAgICAgWzk2LCA4OV0sXHJcbiAgICAgICAgICAgICAgICAgICAgWzEyOCwgODhdLFxyXG4gICAgICAgICAgICAgICAgICAgIFsxNjAsIDg4XVxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgWzI0MCwgMjJdLFxyXG4gICAgICAgICAgICAgICAgICAgIFsyMDUsIDIyXSxcclxuICAgICAgICAgICAgICAgICAgICBbMjMsIDg3XSxcclxuICAgICAgICAgICAgICAgICAgICBbMjMsIDU2XSxcclxuICAgICAgICAgICAgICAgICAgICBbMjMsIDIwXVxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH0pLmdldFNwcml0ZSgpKTtcclxuICAgIH07XHJcbiAgICB2YXIgcmVkcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSBjaGlja2Vucy5sZW5ndGggLSAxOyBfaSA+PSAwOyBfaS0tKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlja2Vuc1tfaV0ucmVtb3ZlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgY2hpY2tlbnNbX2ldLnJlbmRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hpY2tlbnMuc3BsaWNlKF9pLCAxKTtcclxuICAgICAgICAgICAgICAgIHNwYXduKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0LCBmYWxzZSk7XHJcbn0pKCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=