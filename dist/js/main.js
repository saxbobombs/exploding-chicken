!function(){var t=400,e=400,i=31,h=null,s=null,n=[],o=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};function a(){setTimeout((function(){requestAnimationFrame(a),l()}),1e3/30)}var r=function(t){for(var e=0;e<n.length;e++){var h=!1,s=!1;if(t.layerX>=n[e].left&&t.layerX<=n[e].left+i&&(h=!0),t.layerY>=n[e].top&&t.layerY<=n[e].top+i&&(s=!0),h&&s){n[e].explode();break}}},p=function(){function t(t){this._frame=0,this._move=!1,this._upDown=0,this._explode=!1,this._explodeCallback=null,this._explosionPhase=0,this._that={},this._that={remove:!1,top:t.top,left:t.left,anger:t.anger||0,movement:null==t.movement||t.movement,spriteDirection:t.spriteDirection||0,spriteMove:null==t.spriteMove||t.spriteMove,spriteIndex:t.spriteIndex||0,explode:function(t){0===this._explosionPhase&&(this._that.spriteDirection=4,this._that.movement=!1,this._that.spriteMove=!0,this._that.anger=25,this._that.spriteIndex=0,this._explosionPhase++,this._explode=!0,this._explodeCallback=t)},render:function(){if(this._frame++,this._frame+this._that.anger>30&&this._that.spriteMove&&(this._frame=0,this._that.spriteIndex++,!0===this._explode&&(this._explosionPhase++,this._explosionPhase>=t.sprites[4].length&&(this._that.remove=!0)),this._that.movement)){o(10*this._that.anger/2,600)>500&&(this._that.spriteDirection=1===this._that.spriteDirection?0:1);var e=o(10*this._that.anger,600),s=o(10*this._that.anger/2,600),n=o(0,500);e>300&&(n>250?(0===this._that.spriteDirection?this._that.left=this._that.left+5:this._that.left=this._that.left-5,this._that.left<0&&(this._that.left=0),this._that.left+i>h.width&&(this._that.left=h.width-i)):(s>500&&(this._upDown=0===this._upDown?1:0),0===this._upDown?this._that.top=this._that.top+5:this._that.top=this._that.top-5,this._that.top<0&&(this._that.top=0),this._that.top+i>=h.height&&(this._that.top=h.height-i)))}this._that.spriteIndex>=t.sprites[this._that.spriteDirection].length&&(this._that.spriteIndex=0),t.context.drawImage(t.image,t.sprites[this._that.spriteDirection][this._that.spriteIndex][0],t.sprites[this._that.spriteDirection][this._that.spriteIndex][1],t.width,t.height,this._that.left,this._that.top,t.width,t.height)}}}return t.prototype.getSprite=function(){return this._that},t}(),_=function(){var t=document.getElementById("chicken");n.push(new p({context:s,image:t,width:i,top:o(30,.75*h.height),left:o(30,.75*h.width),anger:o(20,30),height:i,sprites:[[[66,22],[98,22],[130,24],[162,24]],[[64,90],[96,89],[128,88],[160,88]],[],[],[[240,22],[205,22],[23,87],[23,56],[23,20]]]}).getSprite())},l=function(){s.clearRect(0,0,h.width,h.height);for(var t=n.length-1;t>=0;t--)!1===n[t].remove?n[t].render():(n.splice(t,1),_())};window.addEventListener("load",(function(){console.log("init"),t=document.body.offsetWidth,e=document.body.offsetHeight,console.log(e),(h=document.createElement("canvas")).height=e,h.width=t,h.addEventListener("mousedown",r,!1),document.body.appendChild(h),s=h.getContext("2d"),a(),_(),_(),_(),_(),_(),_(),_(),_(),_()}),!1)}();